<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Guys Weekend Chores</title>
  <style>
    :root{--bg:#0f1724;--card:#111827;--muted:#94a3b8;--accent1:#667eea;--accent2:#764ba2;--green:#4ade80;--check:#22c55e}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,'Helvetica Neue',Arial;color:#e6eef8;background:linear-gradient(180deg,var(--bg) 0%,#0b1220 100%);display:flex;justify-content:center;padding:28px}
    .wrap{max-width:720px;width:100%}
    header{margin-bottom:24px}
    h1{font-size:22px;margin:0 0 4px;letter-spacing:-0.3px}
    .lead{margin:0;color:var(--muted);font-size:13px}
    .back{color:var(--accent1);text-decoration:none;font-size:13px;display:inline-block;margin-bottom:12px}
    .back:hover{text-decoration:underline}
    .xml-block{background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.06);border-radius:10px;padding:20px;margin-bottom:20px;overflow-x:auto}
    .xml-block pre{margin:0;font-family:'Cascadia Code','Fira Code','JetBrains Mono',Consolas,monospace;font-size:13px;line-height:1.7;white-space:pre-wrap;word-break:break-word}
    .tag{color:#7c8cc5}.attr{color:#c792ea}.str{color:#c3e88d}.decl{color:#89ddff}.comment{color:#546e7a}

    .chore-list{list-style:none;padding:0;margin:0}
    .chore-item{display:flex;align-items:flex-start;gap:12px;padding:12px 16px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.04);border-radius:8px;margin-bottom:8px;cursor:pointer;transition:background 0.15s,border-color 0.15s;user-select:none}
    .chore-item:hover{background:rgba(255,255,255,0.04);border-color:rgba(255,255,255,0.08)}
    .chore-item.done{opacity:0.5}
    .chore-item.done .chore-text{text-decoration:line-through;color:var(--muted)}
    .checkbox{width:20px;height:20px;border:2px solid rgba(255,255,255,0.2);border-radius:5px;flex-shrink:0;margin-top:1px;display:flex;align-items:center;justify-content:center;transition:all 0.15s}
    .chore-item.done .checkbox{background:var(--check);border-color:var(--check)}
    .checkbox svg{width:12px;height:12px;opacity:0;transition:opacity 0.15s}
    .chore-item.done .checkbox svg{opacity:1}
    .chore-num{color:var(--muted);font-size:12px;min-width:22px;text-align:right;margin-top:2px;flex-shrink:0}
    .chore-text{font-size:14px;line-height:1.5}

    .tabs{display:flex;gap:8px;margin-bottom:16px}
    .tab{padding:6px 14px;border-radius:6px;font-size:13px;font-weight:600;cursor:pointer;border:1px solid rgba(255,255,255,0.08);background:transparent;color:var(--muted);transition:all 0.15s}
    .tab.active{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:white;border-color:transparent}
    .tab:hover:not(.active){background:rgba(255,255,255,0.04)}

    .progress{margin-bottom:16px;display:flex;align-items:center;gap:12px}
    .progress-bar{flex:1;height:6px;background:rgba(255,255,255,0.06);border-radius:3px;overflow:hidden}
    .progress-fill{height:100%;background:linear-gradient(90deg,var(--accent1),var(--check));border-radius:3px;transition:width 0.3s ease}
    .progress-text{color:var(--muted);font-size:12px;white-space:nowrap}

    .view{display:none}
    .view.active{display:block}

    footer{margin-top:22px;color:var(--muted);font-size:12px;text-align:center}
    @media(max-width:420px){body{padding:14px}.chore-item{padding:10px 12px}}
  </style>
</head>
<body>
  <div class="wrap">
    <a class="back" href="/">‚Üê Back to apps</a>
    <header>
      <h1>Guys Weekend Chores</h1>
      <p class="lead">A weekend productivity checklist for the modern gentleman.</p>
    </header>

    <div class="tabs">
      <button class="tab active" data-view="checklist">Checklist</button>
      <button class="tab" data-view="xml">Raw XML</button>
    </div>

    <div id="checklist-view" class="view active">
      <div class="progress">
        <div class="progress-bar"><div class="progress-fill" id="progress-fill" style="width:0%"></div></div>
        <span class="progress-text" id="progress-text">0 / 0</span>
      </div>
      <ul class="chore-list" id="chore-list"></ul>
    </div>

    <div id="xml-view" class="view">
      <div class="xml-block">
        <pre id="xml-display"></pre>
      </div>
    </div>

    <footer>Part of the OnePage Apps collection.</footer>
  </div>

  <script>
    const xmlString = `<?xml version="1.0" encoding="UTF-8"?>
<guys_weekend_chores>
  <chore>Text the group: "Poker Friday night?"</chore>
  <chore>Get 4 "maybe" responses, 2 thumbs up, 1 guy who just sends a gif</chore>
  <chore>Pre-game by having "just one beer" (it's never one)</chore>
  <chore>Wake up at 11 AM with poker chips stuck to your face</chore>
  <chore>Assess jean cleanliness (they now have pizza grease AND yesterday's stains)</chore>
  <chore>Survey the damage: empty beer cans forming skyline on counter</chore>
  <chore>Eat cold Uno's pizza for breakfast, feel like a king</chore>
  <chore>Decide cleaning is a "later" problem</chore>
  <chore>Attempt to start fire in fireplace</chore>
  <chore>Spend 20 minutes debating if flue is open</chore>
  <chore>Use entire Sunday newspaper as kindling (you weren't reading it anyway)</chore>
  <chore>Fire finally starts, immediately too hot, open windows</chore>
  <chore>Clear one path through snow: door to truck for beer run</chore>
  <chore>Shovel for exactly 8 minutes before "back hurts"</chore>
  <chore>Leave shovel in middle of driveway</chore>
  <chore>Fire in fireplace dies, too lazy to restart it</chore>
  <chore>Find poker chips in couch cushions from 2 years ago</chore>
  <chore>Consider this "cleaning"</chore>
  <chore>Organize poker chips by color for 45 minutes</chore>
  <chore>Declare this "productive"</chore>
  <chore>Attempt to restart fire, succeed on third try</chore>
  <chore>Sit by fire drinking beer, this is "self-care"</chore>
  <chore>Wipe down one counter, declare kitchen "basically clean"</chore>
  <chore>Fall asleep on couch at 7 PM next to dying fire</chore>
  <chore>Calculate poker losses ($65 total), decide you "basically broke even"</chore>
  <chore>Wore same jeans all 4 days (they're "broken in" now)</chore>
  <chore>Found $20 under the couch during poker chip search (net loss now only $45)</chore>
  <chore>Convinced yourself this was a "restful, productive weekend"</chore>
  <chore>Smell like Uno's garlic and wood smoke</chore>
</guys_weekend_chores>`;

    // Parse chores from the XML
    const parser = new DOMParser();
    const doc = parser.parseFromString(xmlString, 'text/xml');
    const chores = Array.from(doc.querySelectorAll('chore')).map(el => el.textContent);

    // Render checklist
    const list = document.getElementById('chore-list');
    const progressFill = document.getElementById('progress-fill');
    const progressText = document.getElementById('progress-text');
    const checked = new Set();

    function updateProgress() {
      const pct = (checked.size / chores.length) * 100;
      progressFill.style.width = pct + '%';
      progressText.textContent = checked.size + ' / ' + chores.length;
    }

    chores.forEach((text, i) => {
      const li = document.createElement('li');
      li.className = 'chore-item';
      li.innerHTML = `
        <div class="checkbox"><svg viewBox="0 0 12 12" fill="none" stroke="white" stroke-width="2"><path d="M2 6l3 3 5-5"/></svg></div>
        <span class="chore-num">${i + 1}.</span>
        <span class="chore-text">${text.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;')}</span>`;
      li.addEventListener('click', () => {
        if (checked.has(i)) { checked.delete(i); li.classList.remove('done'); }
        else { checked.add(i); li.classList.add('done'); }
        updateProgress();
      });
      list.appendChild(li);
    });
    updateProgress();

    // Syntax-highlighted XML display
    function highlightXml(xml) {
      return xml
        .replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;')
        .replace(/(&lt;\?.*?\?&gt;)/g, '<span class="decl">$1</span>')
        .replace(/(&lt;\/?)([\w_]+)(&gt;)/g, '<span class="tag">$1$2$3</span>');
    }
    document.getElementById('xml-display').innerHTML = highlightXml(xmlString);

    // Tab switching
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
        tab.classList.add('active');
        document.getElementById(tab.dataset.view + '-view').classList.add('active');
      });
    });
  </script>

  <script>
    if (['localhost', '127.0.0.1', '0.0.0.0', '::1'].includes(window.location.hostname)) {
      try {
        const source = new EventSource('/__livereload');
        source.onmessage = (event) => { if (event.data === 'reload') window.location.reload(); };
        source.onerror = () => source.close();
      } catch (err) { console.warn('Live reload unavailable', err); }
    }
  </script>
</body>
</html>
